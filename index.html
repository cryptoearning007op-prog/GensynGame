<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Tic-Tac-Toe ‚Äî Bee vs Image</title>
<style>
  :root{
    --bg:#f5f7fb;
    --card:#ffffff;
    --muted:#6b7280;
    --accent:#6366f1;
    --pad:16px;
    --radius:14px;
  }
  html,body{height:100%}
  body{
    margin:0;
    font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:var(--bg);
    color:#0f172a;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:28px;
  }

  .container{
    width:100%;
    max-width:980px;
    margin:0 auto;
  }

  .card{
    background:var(--card);
    border-radius:var(--radius);
    box-shadow:0 8px 30px rgba(2,6,23,0.06);
    overflow:hidden;
  }

  /* homepage splash */
  .splash img{ width:100%; height:280px; object-fit:cover; display:block; }

  .p{ padding:var(--pad); }

  .controls { display:flex; gap:16px; flex-wrap:wrap; align-items:center; }

  .section{ padding:18px; border-top:1px solid rgba(15,23,42,0.03); display:flex; gap:18px; align-items:center; flex-wrap:wrap; }

  label{ font-size:14px; color:var(--muted); display:block; margin-bottom:6px; }

  .btn { background:#fff; border:1px solid rgba(15,23,42,0.06); padding:10px 14px; border-radius:10px; cursor:pointer; }
  .btn.primary { background:var(--accent); color:white; border:none; }
  .seg { display:flex; gap:8px; }
  .seg .opt { padding:8px 12px; border-radius:10px; background:#fafafa; border:1px solid rgba(2,6,23,0.04); cursor:pointer; }
  .seg .opt.active { background:#eef2ff; border-color:rgba(99,102,241,0.2); box-shadow: 0 2px 8px rgba(99,102,241,0.08); }

  .level-img { width:120px; height:64px; object-fit:cover; border-radius:8px; }

  /* game area */
  .game-outer{ padding:24px; display:flex; gap:24px; align-items:flex-start; flex-wrap:wrap; justify-content:center; }
  .info { min-width:200px; max-width:300px; background:#fff; border-radius:12px; padding:14px; border:1px solid rgba(2,6,23,0.03) }
  .board-wrap { padding:12px; border-radius:12px; display:flex; align-items:center; justify-content:center; }
  .board { display:grid; grid-template-columns: repeat(3,1fr); gap:12px; width:360px; height:360px; }
  .cell { background:rgba(255,255,255,0.9); border-radius:12px; display:flex; align-items:center; justify-content:center; font-size:46px; cursor:pointer; user-select:none; box-shadow: inset 0 -2px 0 rgba(2,6,23,0.03); }
  .cell img { width:56px; height:56px; border-radius:8px; object-fit:cover; }

  .muted { color:var(--muted); font-size:13px; }

  .status { margin-bottom:10px; font-weight:600; }

  .controls-row { display:flex; gap:8px; flex-wrap:wrap; align-items:center; }

  /* pastel patterns */
  .pattern-0{ background: linear-gradient(135deg,#fff7ed 0%, #fef3c7 100%); padding:24px; border-radius:12px; }
  .pattern-1{ background: linear-gradient(135deg,#f3f8ff 0%, #eef2ff 100%); padding:24px; border-radius:12px; }
  .pattern-2{ background: linear-gradient(135deg,#f8fff6 0%, #def7e5 100%); padding:24px; border-radius:12px; }
  .pattern-3{ background: repeating-linear-gradient(45deg,#fff 0 8px,#f8fafc 8px 16px); padding:24px; border-radius:12px; }

  /* responsive */
  @media (max-width:840px){
    .board { width:300px; height:300px; gap:10px; }
    .cell { font-size:40px; }
  }
  @media (max-width:480px){
    .board { width:260px; height:260px; gap:8px; }
    .cell { font-size:34px; }
  }
</style>
</head>
<body>
  <div class="container">

    <div id="homeCard" class="card">
      <div class="splash"><img id="startSplash" src="Screenshot_2023-10-01_at_7.14.41_PM.avif" alt="Start image (place in same folder)"></div>
      <div class="p">
        <p class="muted">Welcome ‚Äî choose who plays Bee, who starts, and difficulty. Light pastel UI.</p>

        <div class="section">
          <div style="min-width:220px">
            <label>Who is Bee?</label>
            <div class="controls">
              <label style="display:flex;align-items:center;gap:8px"><input type="radio" name="whoBee" value="you" checked> <span style="font-size:22px">üêù</span> &nbsp;You</label>
              <label style="display:flex;align-items:center;gap:8px"><input type="radio" name="whoBee" value="comp"> <img src="L-4D2qr9_400x400.jpg" alt="img" style="width:36px;height:36px;border-radius:8px;object-fit:cover"> &nbsp;You</label>
            </div>

            <div style="margin-top:12px;">
              <label>Who starts?</label>
              <div class="seg" id="startSeg">
                <div class="opt active" data-start="you">You</div>
                <div class="opt" data-start="comp">Computer</div>
              </div>
            </div>
          </div>

          <div>
            <label>Difficulty</label>
            <div class="seg" id="diffSeg">
              <div class="opt active" data-diff="easy">Easy</div>
              <div class="opt" data-diff="medium">Medium</div>
              <div class="opt" data-diff="hard">Hard</div>
            </div>

            <div style="margin-top:12px;display:flex;gap:12px;align-items:center">
              <img src="ChatGPT Image Oct 29, 2025, 12_59_21 PM.png" alt="level" class="level-img">
              <div class="muted" style="font-size:13px">This image requested the levels.</div>
            </div>
          </div>
        </div>

        <div style="margin-top:16px;">
          <button class="btn primary" id="startButton">Start Game</button>
        </div>
      </div>
    </div>

    <div id="gameCard" class="card" style="display:none; margin-top:18px;">
      <div id="gameArea" class="game-outer p">
        <div id="patternWrap" class="board-wrap pattern-0">
          <div id="board" class="board" aria-live="polite"></div>
        </div>

        <div class="info">
          <div class="status" id="statusText">Turn: <span id="turnLabel">Bee</span></div>
          <div class="muted" id="scoreText">Bee: 0  ‚Ä¢  Other: 0  ‚Ä¢  Draws: 0</div>

          <hr style="margin:12px 0;border:none;border-top:1px solid rgba(2,6,23,0.04)">

          <div class="muted">Difficulty: <strong id="showDiff">Easy</strong></div>
          <div class="muted" style="margin-top:10px">Pattern: <span id="patternName">Pastel</span></div>

          <div style="margin-top:12px" class="controls-row">
            <button class="btn" id="newMatchBtn">New Match</button>
            <button class="btn" id="homeBtn">Back Home</button>
            <button class="btn" id="resetScoresBtn">Reset Scores</button>
          </div>

          <div style="margin-top:12px" class="muted">Click a cell to play. Bee and the image are used as symbols.</div>
        </div>
      </div>
    </div>

  </div>

<script>
/*
 Single-file Tic-Tac-Toe (no build tools)
 Symbols: 'bee' and 'other' (image)
 Difficulty: easy (random), medium (win/block), hard (minimax)
*/

(function(){
  // config: image filenames (must be in same folder)
  const START_IMAGE = 'Screenshot_2023-10-01_at_7.14.41_PM.avif';
  const COMP_IMG = 'L-4D2qr9_400x400.jpg';
  const LEVEL_IMG = 'ChatGPT Image Oct 29, 2025, 12_59_21 PM.png';

  // DOM
  const homeCard = document.getElementById('homeCard');
  const gameCard = document.getElementById('gameCard');
  const startButton = document.getElementById('startButton');
  const boardEl = document.getElementById('board');
  const statusText = document.getElementById('statusText');
  const turnLabel = document.getElementById('turnLabel');
  const scoreText = document.getElementById('scoreText');
  const showDiff = document.getElementById('showDiff');
  const patternWrap = document.getElementById('patternWrap');
  const patternName = document.getElementById('patternName');
  const newMatchBtn = document.getElementById('newMatchBtn');
  const homeBtn = document.getElementById('homeBtn');
  const resetScoresBtn = document.getElementById('resetScoresBtn');

  // controls
  const diffSeg = document.getElementById('diffSeg');
  const startSeg = document.getElementById('startSeg');

  // state
  let board = Array(9).fill(null); // 'bee' | 'other' | null
  let playerIsBee = true; // if true user is bee
  let userStarts = true;
  let currentTurn = 'bee';
  let difficulty = 'easy';
  let scores = { bee:0, other:0, draws:0 };
  let gameOver = false;
  let patternIndex = 0;

  // patterns
  const patterns = [
    { cls:'pattern-0', name:'Pastel' },
    { cls:'pattern-1', name:'Bluewash' },
    { cls:'pattern-2', name:'Mint' },
    { cls:'pattern-3', name:'Striped' },
  ];

  // winning lines
  const lines = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];

  // helper to render symbols
  function renderSymbol(owner){
    // owner is 'bee' or 'other'
    // if owner is bee, show emoji; if other, show image
    if(owner === 'bee') {
      return '<span style="font-size:54px;line-height:1">üêù</span>';
    } else {
      return '<img src="'+COMP_IMG+'" alt="img">';
    }
  }

  // build board UI
  function drawBoard(){
    boardEl.innerHTML = '';
    for(let i=0;i<9;i++){
      const cell = document.createElement('button');
      cell.className = 'cell';
      cell.dataset.index = i;
      cell.setAttribute('aria-label','cell '+(i+1));
      if(board[i]) cell.innerHTML = renderSymbol(board[i]);
      cell.addEventListener('click', onCellClick);
      boardEl.appendChild(cell);
    }
  }

  function onCellClick(ev){
    if(gameOver) return;
    const idx = Number(ev.currentTarget.dataset.index);
    const userSide = playerIsBee ? 'bee' : 'other';
    if(currentTurn !== userSide) return; // not user's turn
    if(board[idx]) return;
    board[idx] = userSide;
    currentTurn = (userSide === 'bee') ? 'other' : 'bee';
    drawBoard();
    afterMove();
  }

  function checkWinner(bd){
    for(const l of lines){
      const [a,b,c] = l;
      if(bd[a] && bd[a] === bd[b] && bd[b] === bd[c]) return bd[a]; // 'bee' or 'other'
    }
    if(bd.every(x=>x!==null)) return 'draw';
    return null;
  }

  function afterMove(){
    const res = checkWinner(board);
    if(res){
      gameOver = true;
      if(res === 'draw'){
        statusText.textContent = "It's a draw!";
        scores.draws++;
      } else {
        statusText.textContent = (res === 'bee' ? 'Bee wins!' : 'Other wins!');
        scores[res]++;
      }
      updateScoreUI();
      return;
    }
    updateTurnUI();
    // if computer's turn -> let the AI play after a short delay
    const computerSide = playerIsBee ? 'other' : 'bee';
    if(currentTurn === computerSide && !gameOver){
      setTimeout(()=>performAIMove(currentTurn), 350);
    }
  }

  // available moves
  function avail(bd){ return bd.map((v,i)=> v===null?i:-1).filter(i=>i>=0); }

  // EASY: random
  function aiEasy(bd){
    const a = avail(bd);
    return a[Math.floor(Math.random()*a.length)];
  }

  // MEDIUM: try win, block, else random
  function aiMedium(bd,aiWho){
    const opp = aiWho==='bee' ? 'other' : 'bee';
    for(const i of avail(bd)){
      const copy = bd.slice(); copy[i]=aiWho;
      if(checkWinner(copy)===aiWho) return i;
    }
    for(const i of avail(bd)){
      const copy = bd.slice(); copy[i]=opp;
      if(checkWinner(copy)===opp) return i;
    }
    return aiEasy(bd);
  }

  // HARD: minimax
  function aiHard(bd, aiWho){
    const opp = aiWho==='bee' ? 'other' : 'bee';
    function scoreFor(res){
      if(res===aiWho) return 10;
      if(res===opp) return -10;
      return 0;
    }
    function minimax(node, player){
      const r = checkWinner(node);
      if(r) return {score: scoreFor(r)};
      const moves = [];
      for(const i of avail(node)){
        const child = node.slice(); child[i]=player;
        const result = minimax(child, player===aiWho?opp:aiWho);
        moves.push({idx:i, score: result.score});
      }
      if(player===aiWho){
        // maximize
        return moves.reduce((best,m)=> m.score>best.score?m:best, moves[0]);
      } else {
        // minimize
        return moves.reduce((best,m)=> m.score<best.score?m:best, moves[0]);
      }
    }
    if(avail(bd).length===9){
      const fav = [4,0,2,6,8][Math.floor(Math.random()*5)];
      return fav;
    }
    return minimax(bd, aiWho).idx;
  }

  function performAIMove(aiWho){
    if(gameOver) return;
    let idx = null;
    if(difficulty==='easy') idx = aiEasy(board);
    else if(difficulty==='medium') idx = aiMedium(board, aiWho);
    else idx = aiHard(board, aiWho);
    if(idx==null) return;
    board[idx]=aiWho;
    currentTurn = (aiWho==='bee') ? 'other' : 'bee';
    drawBoard();
    afterMove();
  }

  // UI updates
  function updateTurnUI(){
    turnLabel.textContent = currentTurn === 'bee' ? 'Bee' : 'Other';
    statusText.textContent = 'Turn: ' + (currentTurn === 'bee' ? 'Bee' : 'Other');
    showDiff.textContent = difficulty.charAt(0).toUpperCase()+difficulty.slice(1);
  }
  function updateScoreUI(){
    scoreText.textContent = 'Bee: ' + scores.bee + '  ‚Ä¢  Other: ' + scores.other + '  ‚Ä¢  Draws: ' + scores.draws;
  }

  // new match: reset board and pick random pattern, set who starts
  function startMatch(opts){
    board = Array(9).fill(null);
    gameOver = false;
    patternIndex = Math.floor(Math.random()*patterns.length);
    const p = patterns[patternIndex];
    patternWrap.className = 'board-wrap ' + p.cls;
    patternName.textContent = p.name;
    // set who starts
    const userGoes = (opts && typeof opts.userStarts!=='undefined') ? opts.userStarts : userStarts;
    currentTurn = userGoes ? (playerIsBee ? 'bee' : 'other') : (playerIsBee ? 'other' : 'bee');
    drawBoard();
    updateTurnUI();
    // if computer starts, let it move
    const computerSide = playerIsBee ? 'other' : 'bee';
    if(currentTurn === computerSide){
      setTimeout(()=>performAIMove(currentTurn), 450);
    }
  }

  // wire UI events
  diffSeg.addEventListener('click', (e)=>{
    const opt = e.target.closest('.opt');
    if(!opt) return;
    Array.from(diffSeg.querySelectorAll('.opt')).forEach(o=>o.classList.remove('active'));
    opt.classList.add('active');
    difficulty = opt.dataset.diff;
    showDiff.textContent = difficulty.charAt(0).toUpperCase()+difficulty.slice(1);
  });

  startSeg.addEventListener('click',(e)=>{
    const opt = e.target.closest('.opt');
    if(!opt) return;
    Array.from(startSeg.querySelectorAll('.opt')).forEach(o=>o.classList.remove('active'));
    opt.classList.add('active');
    userStarts = opt.dataset.start === 'you';
  });

  // radio who-bee
  Array.from(document.getElementsByName('whoBee')).forEach(r=>{
    r.addEventListener('change', ()=> {
      playerIsBee = document.querySelector('input[name="whoBee"]:checked').value === 'you';
    });
  });

  startButton.addEventListener('click', ()=>{
    // show game area
    homeCard.style.display = 'none';
    gameCard.style.display = 'block';
    // ensure images for level and start are present (browser will show broken if missing)
    document.getElementById('startSplash').src = START_IMAGE;
    // start
    startMatch({ userStarts });
    updateScoreUI();
  });

  newMatchBtn.addEventListener('click', ()=> startMatch({ userStarts }));
  homeBtn.addEventListener('click', ()=>{
    gameCard.style.display = 'none';
    homeCard.style.display = 'block';
  });
  resetScoresBtn.addEventListener('click', ()=>{
    scores = {bee:0, other:0, draws:0};
    updateScoreUI();
  });

  // initialize board UI
  drawBoard();
  updateTurnUI();
  updateScoreUI();

  // keyboard shortcuts (optional)
  document.addEventListener('keydown',(e)=>{
    if(e.key==='n') startMatch({ userStarts });
    if(e.key==='h') { gameCard.style.display='none'; homeCard.style.display='block'; }
  });

})();
</script>
</body>
</html>

